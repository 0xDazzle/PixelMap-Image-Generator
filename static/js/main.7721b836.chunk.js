(this["webpackJsonppixelmap-image-generator"]=this["webpackJsonppixelmap-image-generator"]||[]).push([[0],{12:function(e,t,a){},13:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);var r=a(1),i=a.n(r),c=a(4),n=a.n(c),s=a(2),l=a(0);function o(e){return Object(l.jsx)("form",{className:"flex flex-0 flex-grow px-6 pt-5 pb-6 border-2 border-gray-200 border-dashed rounded-md",encType:"multipart/form-data",children:Object(l.jsxs)("div",{className:"space-y-1 text-center",children:[Object(l.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:Object(l.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),Object(l.jsx)("div",{className:"flex text-sm text-gray-600 justify-center",children:Object(l.jsxs)("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500",children:[Object(l.jsx)("span",{children:"Upload a file"}),Object(l.jsx)("input",{id:"file-upload",name:"file-upload",type:"file",accept:".png",onChange:function(t){t.target&&t.target.files&&t.target.files[0]&&e.changeImage(t.target.files[0])},className:"sr-only"})]})}),Object(l.jsx)("p",{className:"text-xs text-gray-500",children:"PNG only. For best results, ensure your image is crisp and pixel edges are sharp."})]})})}function d(e){for(var t=Object(r.useState)({highlightWidth:0,highlightHeight:0}),a=Object(s.a)(t,2),i=a[0],c=i.highlightWidth,n=i.highlightHeight,o=a[1],d=function(e,t){o({highlightWidth:t,highlightHeight:e})},h=[],u=function(t){for(var a=[],r=function(r){a.push(Object(l.jsx)("div",{className:"h-6 w-6 mr-0.5 mb-0.5 bg-gray-100",onMouseEnter:function(){return d(t,r)},onClick:function(){return a=t,i=r,o({highlightWidth:0,highlightHeight:0}),void e.changeGrid(i,a);var a,i}},t*r))},i=1;i<=6;i++)r(i);h.push(a)},g=1;g<=6;g++)u(g);return Object(l.jsxs)("div",{className:"flex flex-shrink-0 space-x-6",children:[Object(l.jsxs)("div",{className:"",children:[Object(l.jsx)("p",{className:"font-medium text-sm mb-2 text-gray-800",children:"Tile size"}),Object(l.jsxs)("p",{className:"text-gray-900 font-bold",children:[e.col," x ",e.row]}),Object(l.jsxs)("p",{className:"text-gray-900 font-bold",children:[16*e.col,"px x ",16*e.row,"px"]})]}),Object(l.jsxs)("div",{className:"w-42 h-42 relative",onMouseLeave:function(){return d(0,0)},children:[Object(l.jsx)("div",{className:"absolute bg-indigo-300 z-20 rounded-sm -ml-0.5 -mt-0.5",style:{width:"".concat(1.625*c+.125,"rem"),height:"".concat(1.625*n+.125,"rem")}}),Object(l.jsx)("div",{className:"absolute bg-indigo-800 z-10 rounded-sm -ml-0.5 -mt-0.5",style:{width:"".concat(1.625*e.col+.125,"rem"),height:"".concat(1.625*e.row+.125,"rem")}}),Object(l.jsx)("div",{className:"flex flex-wrap relative z-30",children:h})]})]})}a(12);var h=a(5),u=a(6),g=function(){function e(){Object(h.a)(this,e)}return Object(u.a)(e,null,[{key:"changeHeightWidth",value:function(e,t,a,r,i,c,n){return!0===n?(e=t,a=r):(a>r&&(e=Math.round(e*r/a),a=r),e>t&&(a=Math.round(a*t/e),e=t),i&&a<i&&(e=Math.round(e*i/a),a=i),c&&e<c&&(a=Math.round(a*c/e),e=c)),{height:e,width:a}}},{key:"resizeAndRotateImage",value:function(e,t,a,r,i,c){var n=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,s=document.createElement("canvas"),l=e.width,o=e.height,d=this.changeHeightWidth(o,a,l,t,r,i,c);!n||90!==n&&270!==n?(s.width=d.width,s.height=d.height):(s.width=d.height,s.height=d.width),l=d.width,o=d.height;var h=s.getContext("2d");return h.fillStyle="rgba(0, 0, 0, 0)",h.fillRect(0,0,l,o),n&&(h.rotate(n*Math.PI/180),90===n?h.translate(0,-s.width):180===n?h.translate(-s.width,-s.height):270===n?h.translate(-s.height,0):0!==n&&360!==n||h.translate(0,0)),h.drawImage(e,0,0,l,o),s}},{key:"b64toByteArrays",value:function(e,t){t=t||"image/jpeg";for(var a=atob(e.toString().replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"")),r=[],i=0;i<a.length;i+=512){for(var c=a.slice(i,i+512),n=new Array(c.length),s=0;s<c.length;s++)n[s]=c.charCodeAt(s);var l=new Uint8Array(n);r.push(l)}return r}},{key:"b64toBlob",value:function(e,t){var a=this.b64toByteArrays(e,t);return new Blob(a,{type:t,lastModified:new Date})}},{key:"b64toFile",value:function(e,t,a){var r=this.b64toByteArrays(e,a);return new File(r,t,{type:a,lastModified:new Date})}},{key:"createResizedImage",value:function(t,a,r,i,c,n,s){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"base64",o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,h=arguments.length>10&&void 0!==arguments[10]&&arguments[10],u=new FileReader;if(!t)throw Error("File Not Found!");if(t.type&&!t.type.includes("image"))throw Error("File Is NOT Image!");u.readAsDataURL(t),u.onload=function(){var g=new Image;g.src=u.result,g.onload=function(){var u=e.resizeAndRotateImage(g,a,r,o,d,h,i,c,n),j="image/".concat(i);switch(l){case"blob":var m=e.b64toBlob(u,j);s(m);break;case"base64":s(u);break;case"file":var b=t.name.toString().replace(/(png|jpeg|jpg|webp)$/i,"").concat(i.toString()),x=e.b64toFile(u,b,j);s(x);break;default:s(u)}}},u.onerror=function(e){throw Error(e)}}}]),e}(),j=function(e,t,a,r,i,c,n,s,l,o,d){return g.createResizedImage(e,t,a,r,i,c,n,s,l,o,d)};function m(e){return 16*e}function b(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function x(e){return 51*Math.floor((e+25.5)/51)}function f(e,t,a){var r=function(e,t,a){return b(e)+b(t)+b(a)}(e=x(e),t=x(t),a=x(a));r=r.split("");for(var i=[],c=0;c<r.length;c++)c%2!==0&&i.push(r[c]);return i.join("")}function v(e,t,a){var r=document.createElement("canvas");r.width=t,r.height=a;var i=r.getContext("2d");if(!i)return"";i.fillStyle="rgba(255,255,255,255)",i.fillRect(0,0,t,a);for(var c=0,n=0;n<a;n++)for(var s=0;s<t;s++)c<e.length&&(i.fillStyle="#".concat(e[c]),i.fillRect(s,n,1,1)),c++;return r.toDataURL("image/PNG",1)}function p(e){var t=Object(r.useState)(!1),a=Object(s.a)(t,2),i=a[0],c=a[1],n=Object(r.useState)(""),o=Object(s.a)(n,2),d=o[0],h=o[1];return Object(r.useEffect)((function(){h(v(e.code.join(""),16,16))}),[e.code]),Object(l.jsxs)("div",{className:"flex items-center justify-center space-x-4 py-3",children:[Object(l.jsx)("div",{className:"flex-shrink-0",children:Object(l.jsxs)("p",{className:"text-xs text-gray-700",children:[e.id,"."]})}),Object(l.jsx)("div",{className:"flex-shrink-0",children:Object(l.jsx)("img",{className:"block w-auto h-auto mx-auto pixel-image",src:d,alt:"Pixelmap"})}),Object(l.jsx)("div",{className:"flex-1 min-w-0",children:Object(l.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.code.join("")})}),Object(l.jsx)("div",{children:Object(l.jsxs)("button",{type:"button",onClick:function(){navigator.clipboard.writeText(e.code),c(!0)},className:"inline-flex items-center shadow-sm px-2.5 py-0.5 border border-gray-300 text-sm leading-5 font-medium rounded-full text-gray-700 bg-white hover:bg-gray-50",children:[i&&Object(l.jsx)("span",{children:"Copied!"}),!i&&Object(l.jsx)("span",{children:"Copy"})]})})]})}function O(e){var t=Object(r.useState)(),a=Object(s.a)(t,2),i=a[0],c=a[1],n=Object(r.useState)([]),o=Object(s.a)(n,2),d=o[0],h=o[1],u=Object(r.useState)([]),g=Object(s.a)(u,2),b=g[0],x=g[1];return Object(r.useEffect)((function(){if(""!==e.image){var t=m(e.rows),a=m(e.cols);try{j(e.image,a,t,"PNG",100,0,(function(r){var i=function(e,t,a){var r=[],i=e.getContext("2d");if(!i)return[""];for(var c=0;c<a;c++)for(var n=0;n<t;n++){var s=i.getImageData(n,c,1,1).data;r.push(f(s[0],s[1],s[2]))}return r}(r,a,t);h(i),x(function(t,a,r){for(var i=new Array(e.rows*e.cols).fill([]),c=0,n=0,s=0;s<t.length;s+=a){for(var l=t.slice(s,s+a),o=0;o<e.cols;o++){var d=o+n*e.cols,h=i[d],u=l.slice(16*o,16*(o+1));i[d]=h.concat(u)}++c%(r/e.rows)===0&&n++}return i}(i,a,t)),c(r.toDataURL("image/PNG",1))}),"base64",a,t,!0)}catch(r){}}}),[e.image,e.cols,e.rows]),Object(r.useEffect)((function(){var t=m(e.rows),a=m(e.cols),r=v(d,a,t);c(r)}),[d]),Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"grid grid-cols-2 justify-center items-center",children:[Object(l.jsxs)("div",{className:"relative",children:[Object(l.jsx)("div",{className:"absolute inset-0 z-20 grid-background",style:{backgroundSize:"".concat(100/e.cols,"% ").concat(100/e.rows,"%")}}),Object(l.jsx)("img",{className:"block relative w-full h-auto z-10 pixel-image",src:i,alt:"Pixelmap"})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{className:"text-sm text-gray-800 mb-4",children:"Actual size"}),Object(l.jsx)("img",{className:"block w-auto h-auto mx-auto pixel-image",src:i,alt:"Pixelmap"})]})]}),Object(l.jsxs)("div",{className:"my-12",children:[Object(l.jsx)("h3",{className:"text-2xl font-bold",children:"Tile code"}),Object(l.jsx)("div",{className:"mt-4 border-t border-b border-gray-200 divide-y divide-gray-200",children:b.map((function(e,t){return Object(l.jsx)(p,{id:t+1,code:e},t)}))})]})]})}function y(){var e=Object(r.useState)(),t=Object(s.a)(e,2),a=t[0],i=t[1],c=Object(r.useState)({col:1,row:1}),n=Object(s.a)(c,2),h=n[0],u=h.col,g=h.row,j=n[1];return Object(l.jsxs)("div",{children:[Object(l.jsx)("main",{children:Object(l.jsx)("div",{className:"relative py-12 sm:py-16 border-b border-gray-300",children:Object(l.jsxs)("div",{className:"container max-w-3xl mx-auto text-center",children:[Object(l.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"PixelMap Image Generator"}),Object(l.jsx)("p",{className:"text-gray-700",children:"Convert your images to code that you can upload straight to your PixelMap tiles!"}),Object(l.jsx)("div",{className:"my-8",children:Object(l.jsxs)("div",{className:"lg:flex lg:space-between space-y-4 lg:space-y-0 lg:space-x-6",children:[Object(l.jsx)(o,{changeImage:function(e){i(e)}}),Object(l.jsx)(d,{changeGrid:function(e,t){j({col:e,row:t})},col:u,row:g})]})}),Object(l.jsx)("div",{className:"my-12",children:Object(l.jsx)(O,{image:a,cols:u,rows:g})})]})})}),Object(l.jsx)("footer",{className:"py-12 lg:py-24",children:Object(l.jsx)("div",{className:"mx-auto max-w-md px-4 overflow-hidden sm:max-w-3xl sm:px-6 lg:max-w-7xl lg:px-8",children:Object(l.jsx)("div",{className:"text-center text-base text-gray-400",children:Object(l.jsx)("a",{href:"https://www.twitter.com/0xDazzle",target:"_blank",rel:"noreferrer",className:"hover:text-indigo-600 transition duration-150",children:"A project by OxDazzle"})})})})]})}var w=function(){return Object(l.jsx)(y,{})};a(13);n.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(w,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.7721b836.chunk.js.map